## 14-1. 연속 메모리 할당

- 연속 메모리 할당 방식: 프로세스에 연속적인 메모리 공간을 할당하는 방식

### 스와핑

- 스와핑: 메모리에 적재된 프로세스들 중 현재 실행되지 않는 프로세스들을 임시로 보조기억장치 일부 영역으로 쫓아내고, 그 빈 공간에 또 다른 프로세스를 적재하여 실행하는 방식
    
    ![Screenshot 2023-07-20 at 10.59.15 AM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/fca4787d-fdf9-4916-8fb5-59465a71fb6d/Screenshot_2023-07-20_at_10.59.15_AM.png)
    
    - 스왑 영역: 프로세스들이 쫓겨나는 보조기억장치의 일부 영역
    - 스왑 아웃: 현재 실행되지 않는 프로세스가 메모리에서 스왑 영역으로 옮겨지는 것
    - 스왑 인: 스왑 영역에 있던 프로세스가 다시 메모리로 옮겨오는 것
- 스와핑을 이용해 프로세스들이 요구하는 메모리 주소 공간의 크기가 실제 메모리 크기보다 커도 프로세스들을 동시 실행할 수 있음

### 메모리 할당

- 최초 적합
    - 운영체제가 메모리 내의 빈 공간을 순서대로 검색하다가 적재할 수 있는 공간을 발견하면 그 공간에 프로세스를 배치하는 방식
    - 검색을 최소화, 빠른 할당 가능
- 최적 적합
    - 운영체제가 빈 공간을 모두 검색해 본 후, 프로세스가 적재될 수 있는 가장 작은 공간에 프로세스를 배치하는 방식
- 최악 적합
    - 운영체제가 빈 공간을 모두 검색해 본 후, 프로세스가 적재될 수 있는 가장 큰 공간에 프로세스를 배치하는 방식

### 외부 단편화

- 외부 단편화: 프로세스들이 메모리에 연속적으로 할당되는 환경에서 실행과 종료를 반복하며 사이사이에 빈 공간이 생기고, 할당하기 어려운 작은 메모리 공간이 메모리 낭비로 이어지는 현상
- 메모리 압축으로 해결?
    - 압축: 메모리 내에 저장된 프로세스를 적당히 재배치시켜 빈 공간들을 하나의 큰 빈 공간으로 만드는 방법
    - ➖ 공간을 모으는 동안 하던 일을 중지해야 함, 내용을 옮기는 작업은 오버헤드를 야기함, 오버헤드를 최소화하는 명확한 방법을 결정하기 어려움
- 페이징 기법으로 해결

## 14-2. 페이징을 통한 가상 메모리 관리

- 연속 메모리 할당 방식의 문제점?
    - 외부 단편화
    - 물리 메모리보다 큰 프로세스를 실행할 수 없음
- 가상 메모리: 실행하려는 프로그램 일부만 메모리에 적재하여 실제 물리 메모리 크기보다 더 큰 프로세스를 실행할 수 있게 하는 기술
    - 페이징, 세그멘테이션

### 페이징이란

- 외부 단편화의 근본적인 이유는 각기 다른 크기의 프로세스가 연속적으로 할당되었기 때문
- 페이징: 프로세스의 논리 주소 공간을 페이지라는 일정한 단위로 자르고, 메모리 물리 주소 공간을 프레임이라는 (페이지와 동일한 크기의) 일정한 단위로 자른 뒤 페이지를 프레임에 할당하는 가상 메모리 관리 기법
    
    ![Screenshot 2023-07-20 at 1.23.26 PM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/9f8626be-caab-4c21-be7c-2e0c03544b75/Screenshot_2023-07-20_at_1.23.26_PM.png)
    
    - 페이지 단위로 스왑 아웃, 스왑 인 됨
    - 페이지 아웃, 페이지 인
    - 프로세스를 실행하기 위해 프로세스 전체가 메모리에 적재될 필요가 없음 → 물리 메모리보다 더 큰 프로세스를 실행할 수 있음

### 페이지 테이블

- 프로세스가 메모리에 불연속적으로 배치되면 CPU 입장에서 ‘다음에 실행할 명령어 위치’를 찾기 어려워짐
    - → (실제 메모리 내 주소) 물리 주소에 불연속적으로 배치되더라도 (CPU가 바라보는 주소) 논리 주소에는 연속적으로 배치되도록 페이지 테이블을 이용함
- 페이지 테이블: 페이지 번호와 프레임 번호를 짝지어 주는 이정표
- 프로세스마다 각자의 프로세스 테이블, 각 프로세스의 페이지 테이블들은 메모리에 적재, CPU내의 페이지 테이블 베이스 레지스터(PTBR)는 각 프로세스의 페이지 테이블이 적재된 주소를 가리키고 있음
    
    ![Screenshot 2023-07-20 at 1.38.35 PM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d85fc0f2-1118-4900-948f-e89d819c8d39/Screenshot_2023-07-20_at_1.38.35_PM.png)
    
- **TLB**: 페이지 테이블의 캐시 메모리
    - 페이지 테이블 이용 시 접근 시간이 두 배로 늘어남(페이지 테이블 접근, 프레임 접근)을 해결하기 위해 등장
    - 페이지 테이블의 일부 내용 저장, 참조 지역성에 근거해 최근 사용된 페이지 위주로
    - TLB 히트, TLB 미스

### 페이징에서의 주소 변환

- 특정 주소에 접근하기 위해 필요한 정보
    - 어떤 페이지 혹은 프레임에 접근하고 싶은지
    - 접근하려는 주소가 그 페이지 혹은 프레임으로부터 얼마나 떨어져 있는지
