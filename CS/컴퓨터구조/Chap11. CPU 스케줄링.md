# Chap11. CPU 스케줄링

## 11-1. CPU 스케줄링 개요

- CPU 스케줄링: 운영체제가 프로세스들에게 공정하고 합리적으로 CPU 자원을 배분하는 것

### 프로세스 우선순위

- 대부분의 프로세스들은 CPU와 입출력장치를 모두 사용하며 실행됨.
- 프로세스 종류마다 입출력장치, CPU를 이용하는 시간에는 차이가 있음. 그럼에도 동일한 빈도로 CPU를 사용하면 비합리적.
    - 입출력 집중 프로세스 (ex. 비디오 재생, 디스크 백업 작업)
    - CPU 집중 프로세스 (ex. 복잡한 수학 연산, 컴파일, 그래픽 처리 작업)
- 상황에 맞게, 프로세스의 중요도에 맞게 CPU를 이용할 수 있도록 프로세스마다 우선순위를 부여함(각 프로세스의 PCB에 우선순위 명시).

### 스케줄링 큐

- 다음 순서를 찾기 위해 일일이 뒤적거리는 건 비효율적
- 스케줄링 큐에 줄을 서서 기다리도록 관리
    
    ![Screenshot 2023-07-17 at 8.24.48 PM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0b4c95eb-80f4-4afa-8014-97196306506f/Screenshot_2023-07-17_at_8.24.48_PM.png)
    
    - 준비 큐: CPU를 이용하고 싶은 프로세스들이 서는 줄
    - 대기 큐: 입출력장치를 이용하기 위해 대기 상태에 접어든 프로세스들이 서는 줄
- 줄에 상관 없이 우선순위가 높은 프로세스가 먼저 처리될 수 있음
- 입출력 완료 → 완료 인터럽트 → 운영체제는 대기 큐에서 작업이 완료된 PCB를 찾음 → 이 PCB를 준비 상태로 변경한 뒤 대기 큐에서 제거 → 해당 PCB는 준비 큐로 이동

### 선점형과 비선점형 스케줄링

- **선점형 스케줄링**: 프로세스로부터 자원을 강제로 빼앗아 다른 프로세스에 할당할 수 있는 스케줄링 방식
    - 어느 하나의 프로세스가 자원 사용을 독점할 수 없음
    - (+) 자원 독점을 막고 골고루 자원을 배분할 수 있음
    - (-) 문맥 교환 과정에서 오버헤드가 발생할 수 있음
- **비선점형 스케줄링**: 하나의 프로세스가 자원을 사용하고 있다면 그 프로세스가 종료되거나 스스로 대기 상태에 접어들기 전에는 끼어들 수 없는 스케줄링 방식
    - 하나의 프로세스가 자원 사용을 독점할 수 있음
    - (+) 문맥 교환에서 발생하는 오버헤드는 적음
    - (-) 모든 프로세스가 골고루 자원을 사용할 수 없음

## 11-2. CPU 스케줄링 알고리즘

### 스케줄링 알고리즘의 종류

- **선입 선처리 스케줄링**(FCFS 스케줄링): 준비 큐에 삽입된 순서대로 프로세스를 처리하는 비선점형 스케줄링 방식
    - 호위 효과 - 프로세스들이 기다리는 시간이 길어질 수도 있음 (ex. CPU 17ms 동안 사용하는 A, 5ms B, 2ms C)
- **최단작업 우선 스케줄링**(SJF 스케줄링): 준비 큐에 삽입된 프로세스들 중 CPU 이용 시간의 길이가 가장 짧은 프로세스부터 실행하는 스케줄링 방식
- **라운드 로빈 스케줄링**: 정해진 타임 슬라이스 만큼의 시간 동안 돌아가며 CPU를 이용하는 선점형 스케줄링 방식
    - 타임 슬라이스: 각 프로세스가 CPU를 사용할 수 있는 정해진 시간. 크기가 중요하다
- **최소 잔여 시간 우선 스케줄링**(SRT 스케줄링): 정해진 타임 슬라이스만큼 CPU를 사용하되, 다음 프로세스는 남은 작업 시간이 가장 적은 프로세스로 선택
- **우선순위 스케줄링**: 가장 높은 우선순위 프로세스부터 실행하는 스케줄링 방식
    - 기아(starvation) 현상 발생할 수 있음
    - → 에이징(aging) 기법으로 방지: 오래 대기한 프로세스의 우선순위를 점차 높임
- **다단계 큐 스케줄링**: (우선순위 스케줄링의 발전 형태) 우선순위별로 준비 큐를 여러 개 사용하는 스케줄링 방식
    - 큐마다 다른 스케줄링 알고리즘을 사용할 수도 있음
- **다단계 피드백 큐 스케줄링**: (다단계 큐 스케줄링의 발전 형태) 프로세스들이 큐 사이를 이동할 수 있는 다단계 큐 스케줄링 방식
    - 기아 현상 예방
    - ⇒ 가장 일반적인 CPU 스케줄링 알고리즘
